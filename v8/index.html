<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Chrono Frelon</title>

  <!-- PWA -->
  <link rel="manifest" href="./manifest.json">
  <meta name="theme-color" content="#ffffff">

  <!-- Icône -->
  <link rel="icon" href="./icon_4_chrono_2.png">

  <!-- Styles -->
  <link rel="stylesheet" href="./style.css">
</head>

<body>

<!-- ==========================
     HEADER
========================== -->
<header class="topbar">
  <div class="top-left">
    <img src="./icon_4_chrono_2.png" class="top-logo" alt="logo">

    <!-- HELP -->
    <button onclick="openHelpPopup()" data-i18n="help">Aide</button>
  </div>

  <div class="top-title" data-i18n="app_title">
    Pot à Mèche
  </div>

  <div class="top-right">
    <div class="author">B. Barrois</div>

    <div class="top-right-sub">
      <button id="btnMail" title="Contact" type="button">✉️</button>
      <span id="version">v. : x.x</span>
    </div>
  </div>
</header>

<!-- ==========================
     ACTIONS HAUT DE PAGE
========================== -->
<div class="top-actions">
  <button id="btnCapt" class="btn-capt" data-i18n="capture">
    Capture d’écran
  </button>

  <div id="dateTime" class="date-time"></div>

  <button id="btnLoc" class="btn-loc" data-i18n="nest_location">
    Localisation du nid
  </button>
</div>

<!-- ==========================
     CONTENEUR DES CHRONOS
========================== -->
<main id="chronos">
  <!-- Généré dynamiquement par app.js -->
</main>

<!-- ==========================
     VERSION
========================== -->
<script src="./version.js"></script>
<script>
document.addEventListener("DOMContentLoaded", () => {
  const v = document.getElementById("version");
  if (v && typeof APP_VERSION !== "undefined") {
    v.textContent = "v. : " + APP_VERSION;
  }
});
</script>

<!-- ==========================
     DATE & HEURE
========================== -->
<script>
document.addEventListener("DOMContentLoaded", () => {
  const el = document.getElementById("dateTime");
  if (!el) return;

  function updateDateTime() {
    const now = new Date();
    el.textContent =
      now.toLocaleDateString("fr-FR") + " " +
      now.toLocaleTimeSt
